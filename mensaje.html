<!DOCTYPE html>
<html>
    <head>
        <title>bootstrap datepicker examples</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
       
        <link rel="stylesheet" href="http://eternicode.github.io/bootstrap-datepicker/bootstrap-datepicker/css/datepicker3.css">
        <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css">
    </head>
    <body>
        <div class="container"  id="example1">           
        </div>
		
		
		<script type="text/javascript" src="include/jquery-1.9.1.js"></script>
		<script type="text/javascript" src="js/bootstrap.js"></script>
		<script src="js/bootstrap-datepicker.js"></script>	
		<script src="js/bootstrap-datepicker.es.js"></script>		
	

        <script type="text/javascript">            
            $(document).ready(function () {
                var array = ["2014-04-15","2014-04-16","2014-04-17"];
                var eventos;
                var contador = 0;
                var globaldesde = 0;
                function buscarCursos(desde,hasta){
	                $.ajax
					({
					type: "POST",
					url: "Modelo/consultasPortafolio.php",
					data: {id:12, desde:desde, hasta:hasta},
					async: false,	
					dataType: "json",		
					success:
					function (msg) 
					{	
						eventos = msg;
					},
					error:
					function (msg) {
						console.dir(msg);
						console.log("No se pudo realizar la conexion");}
					});		
	        	}
				calendario();
				function calendario(){
	                $('#example1').datepicker({
					    language: "es",
					    format: "dd/mm/yyyy",
					    todayHighlight: true,
					    
					    beforeShowDay: function (date){
					    	if(contador == 0){
					    		auxDesde = date.getTime();
					    		if(globaldesde != auxDesde){
						    		globaldesde = auxDesde;
						    		hasta = new Date(date);
					    			hasta = hasta.setMonth(hasta.getMonth()+2);
						    		buscarCursos(globaldesde/1000,hasta/1000);
						    	}
					    	}
					    	contador = (contador+1)%42;

							var evento;
							var infoEvento = "";
							for(var i = eventos.length-1; i > -1; i--){
								evento = new Date(eventos[i].Desde[0],eventos[i].Desde[1]-1,eventos[i].Desde[2]);
								if(evento.getTime() == date.getTime()){
									infoEvento +=
									"Curso: " + eventos[i].Curso +  
									"\n\tArea: "+  eventos[i].Area +
									"\n\tCupos: "+  eventos[i].Cupos +
									"\n\tDuración: "+  eventos[i].Duracion +
									'\n\tFecha finalización: '+ eventos[i].Hasta[2]+"/"+eventos[i].Hasta[1]+"/"+eventos[i].Hasta[0]+'\n\n';
								}
							}
							if(infoEvento != ""){
								return {
									tooltip: infoEvento,
									classes: 'active'
				            	};
			            	}
						}
					});             
	        	}
        	});
        </script>
    </body>
</html>

